<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<link rel="stylesheet" href="assets/css/foundation.css" />
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		<script type="text/javascript" charset="utf-8">
			// Wait for Cordova to load
			//
			document.addEventListener("deviceready", onDeviceReady, false);

			// Cordova is ready
			//
			function onDeviceReady() {
				startGeoLocate();
				// Run the startGeoLocate function
			}

			function startGeoLocate() {

				var options = {
					maximumAge: 3000, 
					timeout: 20000, 
					enableHighAccuracy: true
				};

				navigator.geolocation.getCurrentPosition(onSuccess, onError, options);
			}

			// onSuccess Geolocation
			//
			function onSuccess(position) {
				var element = document.getElementById('geolocation');
				element.innerHTML = '<h1>Where Am I?</h1>' + 
									'Latitude: ' + position.coords.latitude + '<br />' + 
									'Longitude: ' + position.coords.longitude + '<br />' + 
									'Altitude: ' + position.coords.altitude + '<br />' + 
									'Accuracy: ' + position.coords.accuracy + '<br />' + 
									'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '<br />' + 
									'Heading: ' + position.coords.heading + '<br />' + 
									'Speed: ' + position.coords.speed + '<br />' + 
									'Timestamp: ' + position.timestamp + '<br />' + 
									'<a href="http://www.malimish.com/_locate.php?lat=' + position.coords.latitude + '&long=' + position.coords.longitude + '">Post Location</a><br />' + 
									'<a href="geo:0,0?q=' + position.coords.latitude + ',' + position.coords.longitude + '">Open Google Maps</a><br /><br />' + 
									'<a href="javascript:startGeoLocate();">Reload</a><br />';
									
									
			}

			// onError Callback receives a PositionError object
			//
			function onError(error) {
				alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
			}

		</script>
	</head>
	<body>

		<div class="row">
			<div class="large-12 columns">
				<p id="geolocation">
					Finding geolocation...<br />
					<br />
					<br />
					Or you can try to <a href="javascript:startGeoLocate();">reload</a>.
				</p>
			</div>
		</div>

		<script src="assets/js/foundation.min.js"></script>
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script src="assets/js/vendor/modernizr.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).foundation();
		</script>

	</body>
</html>
